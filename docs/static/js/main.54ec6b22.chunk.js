(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,n){},140:function(e,t,n){},142:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),o=n.n(l),c=(n(57),n(2)),i=n(3),s=n(6),m=n(4),u=n(5),d=n(1),v=n(44),p=n.n(v),h=(n(71),function(e){var t=e.value,n=e.onSelect;return r.a.createElement("div",{className:"menu-item",key:t,onClick:n(t)},t)});h.defaultProps={};var g=h,b=(n(73),function(e){var t=e.menuItems,n=e.onSelect;return r.a.createElement("div",{className:"menu-page"},t.map(function(e){return r.a.createElement(g,{key:e,value:e,onSelect:n})}))});b.defaultProps={};var f=b,E=n(51),y=null,N=[],C=function(e,t){N=N.concat([{name:e,keyData:t}])},O=function(e,t,n,a){N.forEach(function(t){e.objectStoreNames.contains(t.name)||(console.log("Adding datastore: ",t.name),e.createObjectStore(t.name,t.keyData))})},j=function(e){return y};C("monsters",{keyPath:"id"});var k=function(e){return j().put("monsters",e)},w=function(e){return j().delete("monsters",e)},P=function(e){return e.id=e.name+e.xp,e};C("monster-images",{autoIncrement:!0});var S=function(e){return j().put("monster-images",e)},x=function(e){return M(function(e){return Math.floor((e-10)/2)}(e))},M=function(e){var t=e.toString();return t.indexOf("-")<0&&(t="+".concat(t)),t},A=function(e){return D[e]},D={0:"0",25:"1/8",50:"1/4",100:"1/2",200:"1",450:"2",700:"3",1100:"4",1800:"5",2300:"6",2900:"7",3900:"8",5000:"9",5900:"10",7200:"11",8400:"12",10000:"13",11500:"14",13000:"15",15000:"16",18000:"17",20000:"18",22000:"19",25000:"20",33000:"21",41000:"22",50000:"23",62000:"24",75000:"25",90000:"26",105000:"27",120000:"28",135000:"29",155000:"30"},R=function(e){var t=e.onChange,n=e.value,a=e.showSelect;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"",disabled:!a,hidden:!a},"Select CR"),Object.keys(D).map(function(e){return r.a.createElement("option",{key:e,value:e},"".concat(D[e]," (").concat(e," exp)"))}))};R.defaultProps={showSelect:!1};var L=R,I=(n(77),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={monsterList:[],loading:!0},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onAddMonster,n=e.filterXp,a=e.onXPFilter,l=e.onNameFilter,o=e.filterName;return r.a.createElement("div",{className:"monster-viewer-header"},r.a.createElement("div",{className:"mvh-row"},r.a.createElement("input",{className:"mvh-filter",placeholder:"Filter By Monster Name",type:"search",value:o||"",onChange:l}),r.a.createElement("div",{className:"mvh-left-margin"},r.a.createElement(L,{value:null==n?"":n.toString(),onChange:a,showSelect:!0}))),r.a.createElement("button",{onClick:t},"Add Monster"))}}]),t}(a.Component));I.defaultProps={filterXp:null,filterName:null};var T=I,H=n(8),F=(n(80),function(e){var t=e.show,n=e.children,a=t?"modal display-block":"modal display-none";return r.a.createElement("div",{className:a},r.a.createElement("section",{className:"modal-main"},n))}),U=function(e){var t=e.onChange,n=e.value;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"None",disabled:!0,hidden:!0},"Select Size"),r.a.createElement("option",{value:"Tiny"},"Tiny"),r.a.createElement("option",{value:"Small"},"Small"),r.a.createElement("option",{value:"Medium"},"Medium"),r.a.createElement("option",{value:"Large"},"Large"),r.a.createElement("option",{value:"Huge"},"Huge"),r.a.createElement("option",{value:"Gargantuan"},"Gargantuan"))};U.defaultProps={value:"None"};var V=U,z=function(e){var t=e.onChange,n=e.value;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"None",disabled:!0,hidden:!0},"Select Monster Type"),r.a.createElement("option",{value:"Aberration"},"Aberration"),r.a.createElement("option",{value:"Beast"},"Beast"),r.a.createElement("option",{value:"Celestial"},"Celestial"),r.a.createElement("option",{value:"Construct"},"Construct"),r.a.createElement("option",{value:"Dragon"},"Dragon"),r.a.createElement("option",{value:"Elemental"},"Elemental"),r.a.createElement("option",{value:"Fey"},"Fey"),r.a.createElement("option",{value:"Fiend"},"Fiend"),r.a.createElement("option",{value:"Giant"},"Giant"),r.a.createElement("option",{value:"Humanoid"},"Humanoid"),r.a.createElement("option",{value:"Monstrosity"},"Monstrosity"),r.a.createElement("option",{value:"Ooze"},"Ooze"),r.a.createElement("option",{value:"Plant"},"Plant"),r.a.createElement("option",{value:"Undead"},"Undead"))};z.defaultProps={value:"None"};var X=z,B=function(e){var t=e.onChange,n=e.value;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"None",disabled:!0,hidden:!0},"Select Alignment"),r.a.createElement("option",{value:"Unaligned"},"Unaligned"),r.a.createElement("option",{value:"Lawful Good"},"Lawful Good"),r.a.createElement("option",{value:"Neutral Good"},"Neutral Good"),r.a.createElement("option",{value:"Chaotic Good"},"Chaotic Good"),r.a.createElement("option",{value:"Lawful Neutral"},"Lawful Neutral"),r.a.createElement("option",{value:"True Neutral"},"True Neutral"),r.a.createElement("option",{value:"Chaotic Neutral"},"Chaotic Neutral"),r.a.createElement("option",{value:"Lawful Evil"},"Lawful Evil"),r.a.createElement("option",{value:"Neutral Evil"},"Neutral Evil"),r.a.createElement("option",{value:"Chaotic Evil"},"Chaotic Evil"))};B.defaultProps={value:"None"};var G=B,W=(n(9),function(e){var t=e.onChange,n=e.monster;return e.editable?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("input",{type:"text",placeholder:"Monster Name",onChange:t("name"),value:n.name||""}),r.a.createElement("div",{className:"monster-form-row-section"},r.a.createElement(V,{value:n.size||"None",onChange:t("size")}),r.a.createElement("div",{className:"left-margin"},r.a.createElement(X,{value:n.type||"None",onChange:t("type")})),r.a.createElement("div",{className:"left-margin"},r.a.createElement(G,{value:n.alignment||"None",onChange:t("alignment")})))):r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("span",{className:"red-text bold-text"},n.name),r.a.createElement("span",null,"".concat(n.size," ").concat(n.type,", ").concat(n.alignment)))});W.defaultProps={};var K=W,q=function(e){var t=e.onChangeNumber,n=e.monster;return e.editable?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("input",{className:"top-margin",type:"number",placeholder:"AC",onChange:t("ac"),value:n.ac||""}),r.a.createElement("input",{className:"top-margin",type:"number",placeholder:"HP",onChange:t("hp"),value:n.hp||""}),r.a.createElement("input",{className:"top-margin",type:"number",placeholder:"Speed (ft)",onChange:t("speed"),value:n.speed||""})):r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"row-container"},r.a.createElement("span",{className:"red-text bold-text"},"Armor Class:\xa0"),r.a.createElement("span",{className:"red-text"},n.ac)),r.a.createElement("div",{className:"row-container"},r.a.createElement("span",{className:"red-text bold-text"},"Hit Points:\xa0"),r.a.createElement("span",{className:"red-text"},n.hp)),r.a.createElement("div",{className:"row-container"},r.a.createElement("span",{className:"red-text bold-text"},"Speed:\xa0"),r.a.createElement("span",{className:"red-text"},n.speed," ft.")))};q.defaultProps={};var Q=q,J=function(e){var t=e.onChangeNumber,n=e.monster;return e.editable?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"row-container center-container"},r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("input",{className:"number-size",type:"number",placeholder:"STR",onChange:t("stats.str"),value:n.stats.str||""}),r.a.createElement("div",{className:"left-margin"},x(n.stats.str))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("input",{className:"number-size",type:"number",placeholder:"DEX",onChange:t("stats.dex"),value:n.stats.dex||""}),r.a.createElement("div",{className:"left-margin"},x(n.stats.dex))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("input",{className:"number-size",type:"number",placeholder:"CON",onChange:t("stats.con"),value:n.stats.con||""}),r.a.createElement("div",{className:"left-margin"},x(n.stats.con))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("input",{className:"number-size",type:"number",placeholder:"INT",onChange:t("stats.int"),value:n.stats.int||""}),r.a.createElement("div",{className:"left-margin"},x(n.stats.int))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("input",{className:"number-size",type:"number",placeholder:"WIS",onChange:t("stats.wis"),value:n.stats.wis||""}),r.a.createElement("div",{className:"left-margin"},x(n.stats.wis))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("input",{className:"number-size",type:"number",placeholder:"CHA",onChange:t("stats.cha"),value:n.stats.cha||""}),r.a.createElement("div",{className:"left-margin"},x(n.stats.cha))))):r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"row-container center-container"},r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("div",{className:"red-text bold-text"},"STR"),r.a.createElement("div",{className:"red-text"},"".concat(n.stats.str," (").concat(x(n.stats.str),")"))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("div",{className:"red-text bold-text"},"DEX"),r.a.createElement("div",{className:"red-text"},"".concat(n.stats.dex," (").concat(x(n.stats.dex),")"))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("div",{className:"red-text bold-text"},"CON"),r.a.createElement("div",{className:"red-text"},"".concat(n.stats.con," (").concat(x(n.stats.con),")"))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("div",{className:"red-text bold-text"},"INT"),r.a.createElement("div",{className:"red-text"},"".concat(n.stats.int," (").concat(x(n.stats.int),")"))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("div",{className:"red-text bold-text"},"WIS"),r.a.createElement("div",{className:"red-text"},"".concat(n.stats.wis," (").concat(x(n.stats.wis),")"))),r.a.createElement("div",{className:"col-continer center-container side-margin"},r.a.createElement("div",{className:"red-text bold-text"},"CHA"),r.a.createElement("div",{className:"red-text"},"".concat(n.stats.cha," (").concat(x(n.stats.cha),")")))))};J.defaultProps={};var $=J,Y=function(e){var t=e.onChange,n=e.value;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"None",disabled:!0,hidden:!0},"Select Skill"),r.a.createElement("option",{value:"Acrobatics"},"Acrobatics"),r.a.createElement("option",{value:"Animal Handling"},"Animal Handling"),r.a.createElement("option",{value:"Arcana"},"Arcana"),r.a.createElement("option",{value:"Athletics"},"Athletics"),r.a.createElement("option",{value:"Deception"},"Deception"),r.a.createElement("option",{value:"History"},"History"),r.a.createElement("option",{value:"Insight"},"Insight"),r.a.createElement("option",{value:"Intimidation"},"Intimidation"),r.a.createElement("option",{value:"Investigation"},"Investigation"),r.a.createElement("option",{value:"Medicine"},"Medicine"),r.a.createElement("option",{value:"Nature"},"Nature"),r.a.createElement("option",{value:"Perception"},"Perception"),r.a.createElement("option",{value:"Performance"},"Performance"),r.a.createElement("option",{value:"Persuasion"},"Persuasion"),r.a.createElement("option",{value:"Religion"},"Religion"),r.a.createElement("option",{value:"Sleight of Hand"},"Sleight of Hand"),r.a.createElement("option",{value:"Stealth"},"Stealth"),r.a.createElement("option",{value:"Survival"},"Survival"))};Y.defaultProps={value:"None"};var Z=Y,_=function(e){var t=e.onChange,n=e.value;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"None",disabled:!0,hidden:!0},"Select Damage Type"),r.a.createElement("option",{value:"Acid"},"Acid"),r.a.createElement("option",{value:"Bludgeoning"},"Bludgeoning"),r.a.createElement("option",{value:"Cold"},"Cold"),r.a.createElement("option",{value:"Fire"},"Fire"),r.a.createElement("option",{value:"Force"},"Force"),r.a.createElement("option",{value:"Lightning"},"Lightning"),r.a.createElement("option",{value:"Necrotic"},"Necrotic"),r.a.createElement("option",{value:"Piercing"},"Piercing"),r.a.createElement("option",{value:"Poison"},"Poison"),r.a.createElement("option",{value:"Psychic"},"Psychic"),r.a.createElement("option",{value:"Radiant"},"Radiant"),r.a.createElement("option",{value:"Slashing"},"Slashing"),r.a.createElement("option",{value:"Thunder"},"Thunder"))};_.defaultProps={value:"None"};var ee=_,te=function(e){var t=e.onChange,n=e.value;return r.a.createElement("select",{value:n,onChange:t},r.a.createElement("option",{value:"None",disabled:!0,hidden:!0},"Select Condition"),r.a.createElement("option",{value:"Blinded"},"Blinded"),r.a.createElement("option",{value:"Charmed"},"Charmed"),r.a.createElement("option",{value:"Deafened"},"Deafened"),r.a.createElement("option",{value:"Fatigued"},"Fatigued"),r.a.createElement("option",{value:"Frightened"},"Frightened"),r.a.createElement("option",{value:"Grappled"},"Grappled"),r.a.createElement("option",{value:"Incapacitated"},"Incapacitated"),r.a.createElement("option",{value:"Invisible"},"Invisible"),r.a.createElement("option",{value:"Paralyzed"},"Paralyzed"),r.a.createElement("option",{value:"Petrified"},"Petrified"),r.a.createElement("option",{value:"Poisoned"},"Poisoned"),r.a.createElement("option",{value:"Prone"},"Prone"),r.a.createElement("option",{value:"Restrained"},"Restrained"),r.a.createElement("option",{value:"Stunned"},"Stunned"),r.a.createElement("option",{value:"Unconscious"},"Unconscious"),r.a.createElement("option",{value:"Exhaustion"},"Exhaustion"))};te.defaultProps={value:"None"};var ne=te,ae=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={},n.onRemoveElement=n.onRemoveElement.bind(Object(d.a)(Object(d.a)(n))),n.onAddElement=n.onAddElement.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onRemoveElement",value:function(e,t){var n=this;return function(a){var r=n.props.monster[e].filter(function(e,n){return n!==t});n.props.onChange(e)({target:{value:r}})}}},{key:"onAddElement",value:function(e,t){var n=this;return function(a){var r=n.props.monster[e].concat([t]);n.props.onChange(e)({target:{value:r}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.editable,a=t.monster,l=t.onChange,o=t.onChangeNumber;return n?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"column-continer"},r.a.createElement("div",{className:"row-container"},"Skills ",r.a.createElement("button",{onClick:this.onAddElement("skills",{skill:"None",modifier:0}),className:"left-margin"},"Add Skill")),a.skills.map(function(t,n){return r.a.createElement("div",{className:"row-container top-margin",key:n},r.a.createElement(Z,{value:t.skill,onChange:l("skills.".concat(n,".skill"))}),r.a.createElement("input",{className:"left-margin number-size",type:"number",value:t.modifier,onChange:o("skills.".concat(n,".modifier"))}),r.a.createElement("button",{className:"left-margin",onClick:e.onRemoveElement("skills",n)},"Delete"))})),r.a.createElement("div",{className:"column-continer top-margin"},r.a.createElement("div",{className:"row-container"},"Damage Vulnerabilities ",r.a.createElement("button",{onClick:this.onAddElement("damageVulnerabilities","None"),className:"left-margin"},"Add Vulnerability")),a.damageVulnerabilities.map(function(t,n){return r.a.createElement("div",{className:"row-container top-margin",key:n},r.a.createElement(ee,{value:t,onChange:l("damageVulnerabilities.".concat(n))}),r.a.createElement("button",{className:"left-margin",onClick:e.onRemoveElement("damageVulnerabilities",n)},"Delete"))})),r.a.createElement("div",{className:"column-continer top-margin"},r.a.createElement("div",{className:"row-container"},"Damage Resistances ",r.a.createElement("button",{onClick:this.onAddElement("damageResistances","None"),className:"left-margin"},"Add Resistance")),a.damageResistances.map(function(t,n){return r.a.createElement("div",{className:"row-container top-margin",key:n},r.a.createElement(ee,{value:t,onChange:l("damageResistances.".concat(n))}),r.a.createElement("button",{className:"left-margin",onClick:e.onRemoveElement("damageResistances",n)},"Delete"))})),r.a.createElement("div",{className:"column-continer top-margin"},r.a.createElement("div",{className:"row-container"},"Damage Immunities ",r.a.createElement("button",{onClick:this.onAddElement("damageImmunities","None"),className:"left-margin"},"Add Immunity")),a.damageImmunities.map(function(t,n){return r.a.createElement("div",{className:"row-container top-margin",key:n},r.a.createElement(ee,{value:t,onChange:l("damageImmunities.".concat(n))}),r.a.createElement("button",{className:"left-margin",onClick:e.onRemoveElement("damageImmunities",n)},"Delete"))})),r.a.createElement("div",{className:"column-continer top-margin"},r.a.createElement("div",{className:"row-container"},"Condition Immunities ",r.a.createElement("button",{onClick:this.onAddElement("conditionImmunities","None"),className:"left-margin"},"Add Immunity")),a.conditionImmunities.map(function(t,n){return r.a.createElement("div",{className:"row-container top-margin",key:n},r.a.createElement(ne,{value:t,onChange:l("conditionImmunities.".concat(n))}),r.a.createElement("button",{className:"left-margin",onClick:e.onRemoveElement("conditionImmunities",n)},"Delete"))})),r.a.createElement("textarea",{className:"top-margin textarea-size",value:a.senses,onChange:l("senses"),placeholder:"Senses"}),r.a.createElement("textarea",{className:"top-margin textarea-size",value:a.languages,onChange:l("languages"),placeholder:"Languages"}),r.a.createElement("div",{className:"row-container top-margin"},"CR:",r.a.createElement("div",{className:"left-margin"},r.a.createElement(L,{value:a.xp.toString(),onChange:o("xp")})))):r.a.createElement("div",{className:"monster-form-section border-bottom"},0!==a.skills.length&&r.a.createElement("div",{className:"row-container mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Skills\xa0"),r.a.createElement("span",{className:"red-text"},a.skills.map(function(e,t){return"".concat(0===t?"":", ").concat(e.skill," ").concat(M(e.modifier))}))),0!==a.damageVulnerabilities.length&&r.a.createElement("div",{className:"row-container mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Damage Vulnerabilities\xa0"),r.a.createElement("span",{className:"red-text"},a.damageVulnerabilities.map(function(e,t){return"".concat(0===t?"":", ").concat(e)}))),0!==a.damageResistances.length&&r.a.createElement("div",{className:"row-container mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Damage Resistances\xa0"),r.a.createElement("span",{className:"red-text"},a.damageResistances.map(function(e,t){return"".concat(0===t?"":", ").concat(e)}))),0!==a.damageImmunities.length&&r.a.createElement("div",{className:"row-container mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Damage Immunities\xa0"),r.a.createElement("span",{className:"red-text"},a.damageImmunities.map(function(e,t){return"".concat(0===t?"":", ").concat(e)}))),0!==a.conditionImmunities.length&&r.a.createElement("div",{className:"row-container mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Condition Immunities\xa0"),r.a.createElement("span",{className:"red-text"},a.conditionImmunities.map(function(e,t){return"".concat(0===t?"":", ").concat(e)}))),""!==a.senses&&null!=a.senses&&r.a.createElement("div",{className:"mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Senses\xa0"),r.a.createElement("span",{className:"red-text"},a.senses)),""!==a.languages&&null!=a.languages&&r.a.createElement("div",{className:"mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Languages\xa0"),r.a.createElement("span",{className:"red-text"},a.languages)),r.a.createElement("div",{className:"mm-align-left"},r.a.createElement("span",{className:"red-text bold-text"},"Challenge\xa0"),r.a.createElement("span",{className:"red-text"},"".concat(A(a.xp)," (").concat(a.xp," XP)"))))}}]),t}(a.Component);ae.defaultProps={};var re=ae,le=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={},n.onRemoveElement=n.onRemoveElement.bind(Object(d.a)(Object(d.a)(n))),n.onAddElement=n.onAddElement.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onRemoveElement",value:function(e,t){var n=this;return function(a){var r=n.props.monster[e].filter(function(e,n){return n!==t});n.props.onChange(e)({target:{value:r}})}}},{key:"onAddElement",value:function(e,t){var n=this;return function(a){var r=n.props.monster[e].concat([t]);n.props.onChange(e)({target:{value:r}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.editable,a=t.monster,l=t.onChange;return n?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"row-container"},"Abilities: ",r.a.createElement("button",{className:"left-margin",onClick:this.onAddElement("abilities",{name:"",descr:""})},"Add Ability")),a.abilities.map(function(t,n){return r.a.createElement("div",{key:n,className:"row-container top-margin"},r.a.createElement("input",{className:"mm-margin-element",type:"text",placeholder:"Ability Name",value:t.name,onChange:l("abilities.".concat(n,".name"))}),r.a.createElement("textarea",{className:"mm-margin-element textarea-size",placeholder:"Ability Description",value:t.descr,onChange:l("abilities.".concat(n,".descr"))}),r.a.createElement("button",{className:"mm-margin-element",onClick:e.onRemoveElement("abilities",n)},"Delete"))})):0===a.abilities.length?null:r.a.createElement("div",{className:"monster-form-section border-bottom mm-align-left"},a.abilities.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",{className:"bold-text"},e.name,"\xa0"),r.a.createElement("span",null,e.descr))}))}}]),t}(a.Component);le.defaultProps={};var oe=le,ce=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={},n.onRemoveElement=n.onRemoveElement.bind(Object(d.a)(Object(d.a)(n))),n.onAddElement=n.onAddElement.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onRemoveElement",value:function(e,t){var n=this;return function(a){var r=n.props.monster[e].filter(function(e,n){return n!==t});n.props.onChange(e)({target:{value:r}})}}},{key:"onAddElement",value:function(e,t){var n=this;return function(a){var r=n.props.monster[e].concat([t]);n.props.onChange(e)({target:{value:r}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.editable,a=t.monster,l=t.onChange;return n?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"row-container"},"Actions: ",r.a.createElement("button",{className:"left-margin",onClick:this.onAddElement("actions",{name:"",descr:""})},"Add Action")),a.actions.map(function(t,n){return r.a.createElement("div",{key:n,className:"row-container top-margin"},r.a.createElement("input",{className:"mm-margin-element",type:"text",placeholder:"Action Name",value:t.name,onChange:l("actions.".concat(n,".name"))}),r.a.createElement("textarea",{className:"textarea-size mm-margin-element",placeholder:"Action Description",value:t.descr,onChange:l("actions.".concat(n,".descr"))}),r.a.createElement("button",{className:"mm-margin-element",onClick:e.onRemoveElement("actions",n)},"Delete"))})):0===a.actions.length?null:r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"red-text bold-text"},"Actions"),a.actions.map(function(e,t){return r.a.createElement("div",{className:"top-margin mm-align-left",key:t},r.a.createElement("span",{className:"bold-text"},e.name,"\xa0"),r.a.createElement("span",null,e.descr))}))}}]),t}(a.Component);ce.defaultProps={};var ie=ce,se=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={},n.onRemoveElement=n.onRemoveElement.bind(Object(d.a)(Object(d.a)(n))),n.onAddElement=n.onAddElement.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onRemoveElement",value:function(e,t){var n=this;return function(a){var r=Object(H.property)(e.split("."))(n.props.monster).filter(function(e,n){return n!==t});n.props.onChange(e)({target:{value:r}})}}},{key:"onAddElement",value:function(e,t){var n=this;return function(a){var r=Object(H.property)(e.split("."))(n.props.monster).concat([t]);n.props.onChange(e)({target:{value:r}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.editable,a=t.monster,l=t.onChange;return n?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"row-container"},"Legendary Actions: ",r.a.createElement("button",{className:"left-margin",onClick:this.onAddElement("legendaryActions.actions",{name:"",descr:""})},"Add Action")),r.a.createElement("textarea",{className:"top-margin textarea-size",placeholder:"Legendary Action Summary and Restrictions",onChange:l("legendaryActions.summary"),value:a.legendaryActions.summary}),a.legendaryActions.actions.map(function(t,n){return r.a.createElement("div",{key:n,className:"row-container top-margin"},r.a.createElement("input",{className:"mm-margin-element",placeholder:"Action Name",type:"text",value:t.name,onChange:l("legendaryActions.actions.".concat(n,".name"))}),r.a.createElement("textarea",{className:"mm-margin-element textarea-size",placeholder:"Action Description",value:t.descr,onChange:l("legendaryActions.actions.".concat(n,".descr"))}),r.a.createElement("button",{className:"mm-margin-element",onClick:e.onRemoveElement("legendaryActions.actions",n)},"Delete"))})):0===a.legendaryActions.actions.length?null:r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",{className:"red-text bold-text"},"Legendary Actions"),r.a.createElement("div",null,a.legendaryActions.summary),a.legendaryActions.actions.map(function(e,t){return r.a.createElement("div",{className:"top-margin mm-align-left",key:t},r.a.createElement("span",{className:"bold-text"},e.name,"\xa0"),r.a.createElement("span",null,e.descr))}))}}]),t}(a.Component);se.defaultProps={};var me=se,ue=n(45),de=n.n(ue),ve=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={pictureURL:null,loadingImage:!1},n.onDrop=n.onDrop.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props.monster;null!=n.imageKey&&((e=n.imageKey,j().get("monster-images",e)).then(function(e){t.setState({pictureURL:e})}).catch(function(e){n.imageKey=null}),this.setState({loadingImage:!0}))}},{key:"onDrop",value:function(e){var t=this,n=new FileReader;n.onload=function(e){t.props.onImageSet(n.result),t.setState({pictureURL:n.result,loadingImage:!1})},n.readAsDataURL(e[0]),this.setState({loadingImage:!0})}},{key:"render",value:function(){var e=this.state,t=e.loadingImage,n=e.pictureURL,a=this.props.editable;return t||null!=n?r.a.createElement("div",{className:"row-container center-container"},r.a.createElement("img",{style:{maxHeight:"20em"},alt:"Loading...",src:n})):a?r.a.createElement(de.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".gif",".png",".gif"],maxFileSize:5242880}):null}}]),t}(a.Component);ve.defaultProps={editable:!1,onImageSet:H.noop};var pe=ve,he=function(e){var t=e.onChange,n=e.monster;return e.editable?r.a.createElement("div",{className:"monster-form-section border-bottom"},r.a.createElement("div",null,"Description:"),r.a.createElement("textarea",{className:"textarea-size top-margin",onChange:t("description"),value:n.description})):r.a.createElement("div",{className:"monster-form-section border-bottom mm-align-left"},r.a.createElement("span",null,n.description))};he.defaultProps={};var ge=he,be=function(e,t,n){for(var a=t.split("."),r=e,l=0;l<a.length;l++){var o=a[l];l===a.length-1?r[o]=n:(null==r[o]&&(r[o]={}),r=r[o])}},fe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onChange=n.onChange.bind(Object(d.a)(Object(d.a)(n))),n.onChangeNumber=n.onChangeNumber.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){var t=this,n=this.props.monster;return function(a){var r=a.target.value,l=Object(H.clone)(n);be(l,e,r),t.props.onMonsterChange(l)}}},{key:"onChangeNumber",value:function(e){var t=this,n=this.props.monster;return function(a){var r=parseInt(a.target.value),l=Object(H.clone)(n);be(l,e,r),t.props.onMonsterChange(l)}}},{key:"render",value:function(){var e=this.props,t=e.editable,n=e.show,a=e.monster,l=e.onSave,o=e.onCancel,c=e.onDelete,i=e.onImageSet,s=e.onToggleEdit;return null==a?null:r.a.createElement(F,{show:n},r.a.createElement("div",{className:"monster-form"},r.a.createElement(K,{editable:t,monster:a,onChange:this.onChange}),r.a.createElement(Q,{editable:t,monster:a,onChangeNumber:this.onChangeNumber}),r.a.createElement($,{editable:t,monster:a,onChangeNumber:this.onChangeNumber}),r.a.createElement(re,{editable:t,monster:a,onChange:this.onChange,onChangeNumber:this.onChangeNumber}),r.a.createElement(oe,{editable:t,monster:a,onChange:this.onChange}),r.a.createElement(ie,{editable:t,monster:a,onChange:this.onChange}),r.a.createElement(me,{editable:t,monster:a,onChange:this.onChange}),r.a.createElement(ge,{editable:t,monster:a,onChange:this.onChange}),r.a.createElement("div",{className:"monster-form-section"},r.a.createElement(pe,{editable:t,monster:a,onImageSet:i})),t?r.a.createElement("div",{className:"row-container-space-between top-margin"},r.a.createElement("button",{onClick:l},"Save"),null!=a.id&&r.a.createElement("button",{onClick:c},"Delete"),r.a.createElement("button",{onClick:o},"Cancel")):r.a.createElement("div",{className:"row-container-space-between top-margin"},s!==H.noop&&r.a.createElement("button",{onClick:s},"Edit"),r.a.createElement("button",{onClick:o},"Close"))))}}]),t}(a.Component);fe.defaultProps={monster:null,editable:!1,onMonsterChange:H.noop,onSave:H.noop,onDelete:H.noop,onImageSet:H.noop,onToggleEdit:H.noop};var Ee=fe,ye=(n(87),function(e){var t=e.onSelect,n=e.onView,a=e.addText,l=e.viewText,o=e.show;return r.a.createElement(F,{show:o},r.a.createElement("div",{className:"soem-container"},r.a.createElement("div",{className:"soem-element"},"".concat(a," or ").concat(l.toLowerCase()," element.")),r.a.createElement("div",{className:"soem-button-row"},r.a.createElement("button",{className:"soem-element",onClick:t},a),r.a.createElement("button",{className:"soem-element",onClick:n},l))))});ye.defaultProps={addText:"Select",viewText:"View"};var Ne=ye,Ce=(n(89),function(e){return e.sort(function(e,t){var n=e.id.toUpperCase(),a=t.id.toUpperCase();return n<a?-1:n>a?1:0})}),Oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={monsterList:[],selectedMonster:null,imageURL:null,filterXp:null,filterName:null,editing:!1,selectOrViewMonster:null},n.onAddMonster=n.onAddMonster.bind(Object(d.a)(Object(d.a)(n))),n.onImageSet=n.onImageSet.bind(Object(d.a)(Object(d.a)(n))),n.onMonsterChange=n.onMonsterChange.bind(Object(d.a)(Object(d.a)(n))),n.viewMonster=n.viewMonster.bind(Object(d.a)(Object(d.a)(n))),n.changeMonster=n.changeMonster.bind(Object(d.a)(Object(d.a)(n))),n.onDeleteMonster=n.onDeleteMonster.bind(Object(d.a)(Object(d.a)(n))),n.saveMonsterModel=n.saveMonsterModel.bind(Object(d.a)(Object(d.a)(n))),n.cancelMonsterModal=n.cancelMonsterModal.bind(Object(d.a)(Object(d.a)(n))),n.changeXPFilter=n.changeXPFilter.bind(Object(d.a)(Object(d.a)(n))),n.changeNameFilter=n.changeNameFilter.bind(Object(d.a)(Object(d.a)(n))),n.onToggleEdit=n.onToggleEdit.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onAddMonster",value:function(){this.setState({selectedMonster:{name:"",size:"None",type:"None",alignment:"None",stats:{str:0,dex:0,con:0,int:0,wis:0,cha:0},skills:[],xp:0,ac:0,hp:0,speed:0,damageVulnerabilities:[],damageImmunities:[],damageResistances:[],conditionImmunities:[],senses:"",languages:"",actions:[],abilities:[],legendaryActions:{summary:"",actions:[]},description:"",imageKey:null},imageURL:null,editing:!0})}},{key:"onImageSet",value:function(e){this.setState({imageURL:e})}},{key:"onToggleEdit",value:function(){this.setState({editing:!0})}},{key:"onMonsterChange",value:function(e){this.setState({selectedMonster:e,selectOrViewMonster:null})}},{key:"viewMonster",value:function(e){this.onMonsterChange(e)}},{key:"changeMonster",value:function(e){var t=this;return function(n){null==t.props.onSelectMonster?t.onMonsterChange(e):t.setState({selectOrViewMonster:e})}}},{key:"cancelMonsterModal",value:function(){this.setState({selectedMonster:null,imageURL:null,editing:!1})}},{key:"onDeleteMonster",value:function(){var e,t=this.state.selectedMonster,n=this.state.monsterList;n=n.filter(function(e){return e.id!==t.id}),t.imageKey&&(e=t.imageKey,j().delete("monster-images",e)),w(t.id),this.setState({selectedMonster:null,monsterList:Ce(n),imageURL:null,editing:!1})}},{key:"saveMonsterModel",value:function(){var e=this.state.selectedMonster,t=this.state,n=t.monsterList,a=t.imageURL;if(null==e.id)P(e),n=n.concat([e]),a?S(a).then(function(t){e.imageKey=t,k(e)}):k(e);else{var r=e.id;n=n.filter(function(t){return t.id!==e.id}),P(e),n=n.concat([e]),a?S(a).then(function(t){e.imageKey=t,w(r).then(function(t){return k(e)})}):w(r).then(function(t){return k(e)})}this.setState({selectedMonster:null,monsterList:Ce(n),imageURL:null,editing:!1})}},{key:"componentDidMount",value:function(e){var t=this;j().getAll("monsters").then(function(e){t.setState({monsterList:Ce(e),loading:!1})}).catch(function(e){console.error(e)})}},{key:"changeNameFilter",value:function(e){var t=e.target.value;this.setState({filterName:t})}},{key:"changeXPFilter",value:function(e){var t=e.target.value;this.setState({filterXp:""===t?null:parseInt(t)})}},{key:"render",value:function(){var e=this,t=this.props.onSelectMonster,n=this.state,a=n.monsterList,l=n.selectedMonster,o=n.filterName,c=n.filterXp,i=n.editing,s=n.selectOrViewMonster,m=null!=l,u=null!=s,d=null==o||""===o?null:o.toUpperCase();return r.a.createElement("div",{className:"mv-view"},r.a.createElement(T,{filterXp:c,filterName:o,onAddMonster:this.onAddMonster,onNameFilter:this.changeNameFilter,onXPFilter:this.changeXPFilter}),r.a.createElement(Ne,{onSelect:function(e){return t(s)},onView:function(t){return e.viewMonster(s)},show:u}),r.a.createElement(Ee,{monster:l,show:m,onSave:this.saveMonsterModel,onCancel:this.cancelMonsterModal,onMonsterChange:this.onMonsterChange,onImageSet:this.onImageSet,onDelete:this.onDeleteMonster,editable:i,onToggleEdit:this.onToggleEdit}),a.filter(function(e){var t=null==d||e.name.toUpperCase().indexOf(d)>=0;return(null==c||e.xp===c)&&t}).map(function(t){return r.a.createElement("div",{className:"mv-monster",key:t.id,onClick:e.changeMonster(t)},"".concat(t.name," CR ").concat(A(t.xp)))}))}}]),t}(a.Component);Oe.defaultProps={onSelectMonster:null};var je=Oe;C("players",{keyPath:"id",autoIncrement:!0});var ke=function(e){return j().put("players",e)},we=(n(91),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onAddPlayer,n=e.onNameFilter,a=e.filterName;return r.a.createElement("div",{className:"player-viewer-header"},r.a.createElement("input",{className:"pvh-first-element",placeholder:"Filter By Player Name",type:"search",value:a||"",onChange:n}),r.a.createElement("button",{className:"pvh-last-element",onClick:t},"Add Player"))}}]),t}(a.Component));we.defaultProps={filterName:null};var Pe=we,Se=(n(93),n(95),function(e,t,n){for(var a=t.split("."),r=e,l=0;l<a.length;l++){var o=a[l];l===a.length-1?r[o]=n:(null==r[o]&&(r[o]={}),r=r[o])}}),xe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onChange=n.onChange.bind(Object(d.a)(Object(d.a)(n))),n.onChangeNumber=n.onChangeNumber.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){var t=this,n=this.props.player;return function(a){var r=a.target.value,l=Object(H.clone)(n);Se(l,e,r),t.props.onPlayerChange(l)}}},{key:"onChangeNumber",value:function(e){var t=this,n=this.props.player;return function(a){var r=parseInt(a.target.value),l=Object(H.clone)(n);Se(l,e,r),t.props.onPlayerChange(l)}}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.player,a=e.onSave,l=e.onCancel,o=e.onDelete;return null==n?null:r.a.createElement(F,{show:t},r.a.createElement("div",{className:"player-modal-form"},r.a.createElement("div",{className:"pm-row-container pm-flex-start pm-margin-top"},r.a.createElement("input",{className:"pm-first-element",type:"text",placeholder:"Player Name",onChange:this.onChange("playerName"),value:n.playerName||""}),r.a.createElement("input",{className:"pm-margin-left pm-input",type:"text",placeholder:"Character Name",onChange:this.onChange("characterName"),value:n.characterName||""}),r.a.createElement("input",{className:"pm-margin-left pm-number-input",type:"number",placeholder:"Level",onChange:this.onChangeNumber("level"),value:n.level||""}),r.a.createElement("input",{className:"pm-margin-left pm-number-input",type:"number",placeholder:"Max Hp",onChange:this.onChangeNumber("maxHp"),value:n.maxHp||""})),r.a.createElement("div",{className:"pm-row-container pm-space-between pm-margin-top pm-margin-bottom"},r.a.createElement("button",{className:"pm-first-element",onClick:a},"Save"),null!=n.id&&r.a.createElement("button",{className:"pm-element",onClick:o},"Delete"),r.a.createElement("button",{className:"pm-last-element",onClick:l},"Cancel"))))}}]),t}(a.Component);xe.defaultProps={player:null,onPlayerChange:H.noop,onDelete:H.noop};var Me=xe,Ae=function(e){return e.sort(function(e,t){var n=e.playerName.toUpperCase(),a=t.playerName.toUpperCase();return n<a?-1:n>a?1:0})},De=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={playerList:[],loading:!0,filterName:null,selectedPlayer:null,selectOrEditPlayer:null},n.onNameFilter=n.onNameFilter.bind(Object(d.a)(Object(d.a)(n))),n.onDeletePlayer=n.onDeletePlayer.bind(Object(d.a)(Object(d.a)(n))),n.onSavePlayer=n.onSavePlayer.bind(Object(d.a)(Object(d.a)(n))),n.onCancelPlayerModal=n.onCancelPlayerModal.bind(Object(d.a)(Object(d.a)(n))),n.onPlayerChange=n.onPlayerChange.bind(Object(d.a)(Object(d.a)(n))),n.viewPlayer=n.viewPlayer.bind(Object(d.a)(Object(d.a)(n))),n.changePlayer=n.changePlayer.bind(Object(d.a)(Object(d.a)(n))),n.onAddPlayer=n.onAddPlayer.bind(Object(d.a)(Object(d.a)(n))),n.sortMethod=Ae,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;j().getAll("players").then(function(t){e.setState({playerList:e.sortMethod(t),loading:!1})}).catch(function(e){console.error(e)})}},{key:"onNameFilter",value:function(e){var t=e.target.value;this.setState({filterName:t})}},{key:"onPlayerChange",value:function(e){this.setState({selectedPlayer:e,selectOrEditPlayer:null})}},{key:"viewPlayer",value:function(e){this.onPlayerChange(e)}},{key:"changePlayer",value:function(e){var t=this;return function(n){null==t.props.onSelectPlayer?t.onPlayerChange(e):t.setState({selectOrEditPlayer:e})}}},{key:"onAddPlayer",value:function(){this.setState({selectedPlayer:{playerName:"",characterName:"",level:0,maxHp:0}})}},{key:"onCancelPlayerModal",value:function(){this.setState({selectedPlayer:null})}},{key:"onDeletePlayer",value:function(){var e,t=this.state.selectedPlayer,n=this.state.playerList;n=n.filter(function(e){return e.id!==t.id}),e=t.id,j().delete("players",e),this.setState({selectedPlayer:null,playerList:this.sortMethod(n)})}},{key:"onSavePlayer",value:function(){var e=this,t=this.state.selectedPlayer,n=this.state.playerList;null==t.id?ke(t).then(function(a){t.id=a,n=n.concat([t]),e.setState({selectedPlayer:null,playerList:e.sortMethod(n)})}):(n=n.map(function(e){return e.id!==t.id?e:t}),ke(t),this.setState({selectedPlayer:null,playerList:this.sortMethod(n)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.playerList,a=t.selectedPlayer,l=t.filterName,o=t.selectOrEditPlayer,c=this.props.onSelectPlayer,i=null!=a,s=null!=o,m=null==l||""===l?null:l.toUpperCase();return r.a.createElement("div",{className:"pv-view"},r.a.createElement(Pe,{filterName:l,onAddPlayer:this.onAddPlayer,onNameFilter:this.onNameFilter}),r.a.createElement(Ne,{onSelect:function(e){return c(o)},onView:function(t){return e.viewPlayer(o)},show:s}),r.a.createElement(Me,{player:a,show:i,onSave:this.onSavePlayer,onCancel:this.onCancelPlayerModal,onDelete:this.onDeletePlayer,onPlayerChange:this.onPlayerChange}),n.filter(function(e){return null==m||e.playerName.toUpperCase().indexOf(m)>=0}).map(function(t){return r.a.createElement("div",{className:"pv-player",key:t.id,onClick:e.changePlayer(t)},r.a.createElement("div",null,"".concat(t.characterName," (").concat(t.playerName,")")),r.a.createElement("div",null,"Level: ",t.level," Max Hp: ",t.maxHp))}))}}]),t}(a.Component);De.defaultProps={onSelectPlayer:null};var Re=De,Le="LIST";C("encounters",{keyPath:"id",autoIncrement:!0});n(97);var Ie=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onAddEncounter,n=e.onNameFilter,a=e.filterName;return r.a.createElement("div",{className:"encounters-list-header"},r.a.createElement("input",{placeholder:"Filter By Name",type:"search",value:a||"",onChange:n}),r.a.createElement("button",{onClick:t},"Add Encounter"))}}]),t}(a.Component);Ie.defaultProps={filterName:null};var Te=Ie,He=(n(99),function(e){return e.sort(function(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0})}),Fe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={encounterList:[],loading:!0,filterName:null},n.onNameFilter=n.onNameFilter.bind(Object(d.a)(Object(d.a)(n))),n.onDeleteEncounter=n.onDeleteEncounter.bind(Object(d.a)(Object(d.a)(n))),n.onEditEncounter=n.onEditEncounter.bind(Object(d.a)(Object(d.a)(n))),n.onRunEncounter=n.onRunEncounter.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;j().getAll("encounters").then(function(t){e.setState({encounterList:He(t),loading:!1})}).catch(function(e){console.error(e)})}},{key:"onNameFilter",value:function(e){var t=e.target.value;this.setState({filterName:t})}},{key:"onEditEncounter",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(n){return e.props.onChangeView("BUILDER",t)}}},{key:"onRunEncounter",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(n){return e.props.onChangeView("RUNNER",t)}}},{key:"onDeleteEncounter",value:function(e){var t=this;return function(n){var a,r=t.state.encounterList;r=r.filter(function(t){return t.id!==e}),a=e,j().delete("encounters",a),t.setState({encounterList:He(r)})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.encounterList,a=t.filterName,l=null==a||""===a?null:a.toUpperCase();return r.a.createElement("div",{className:"el-view"},r.a.createElement(Te,{filterName:a,onAddEncounter:this.onEditEncounter(),onNameFilter:this.onNameFilter}),n.filter(function(e){return null==l||e.name.toUpperCase().indexOf(l)>=0}).map(function(t){return r.a.createElement("div",{className:"el-encounter",key:t.id},r.a.createElement("div",null,t.name),r.a.createElement("div",{className:"el-margin-top el-row-space-between"},r.a.createElement("button",{className:"el-row-force-space",onClick:e.onEditEncounter(t)},"Edit"),r.a.createElement("button",{className:"el-row-force-space",onClick:e.onDeleteEncounter(t.id)},"Delete"),r.a.createElement("button",{className:"el-row-force-space",onClick:e.onRunEncounter(t)},"Run")))}))}}]),t}(a.Component);Fe.defaultProps={};var Ue=Fe,Ve=function(e){var t={};return t.id=e.id,t.name=e.name,t.monsters=[],t.players=[],e.monsters.reduce(function(e,n){var a,r=(a=n.id,j().get("monsters",a)).then(function(e){t.monsters.push({count:n.count,monster:e})});return null==e?r:e.then(function(e){return r})},new Promise(function(e,t){return e()})).then(function(n){return e.players.reduce(function(e,n){var a,r=(a=n,j().get("players",a)).then(function(e){t.players.push(e)});return null==e?r:e.then(function(e){return r})},new Promise(function(e,t){return e()}))}).then(function(e){return t})},ze=(n(24),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={viewMonster:null},n.viewMonster=n.viewMonster.bind(Object(d.a)(Object(d.a)(n))),n.closeModal=n.closeModal.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"viewMonster",value:function(e){var t=this;return function(n){t.setState({viewMonster:e})}}},{key:"closeModal",value:function(){this.setState({viewMonster:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.onAddMonster,a=t.monsterList,l=t.onRemoveMonster,o=t.onChangeMonsterQty,c=this.state.viewMonster;return r.a.createElement("div",{className:"eb-list-container"},r.a.createElement("button",{onClick:n},"Add Monster"),a.map(function(t){return r.a.createElement("div",{key:t.monster.id,className:"eb-list-element"},r.a.createElement("input",{type:"number",className:"eb-number-input",onChange:o(t.monster.id),value:t.count}),r.a.createElement("div",{onClick:e.viewMonster(t.monster),className:"eb-margin-element eb-clickable"},"".concat(t.monster.name," CR ").concat(A(t.monster.xp))),r.a.createElement("button",{className:"eb-margin-element",onClick:l(t.monster.id)},"Delete"))}),r.a.createElement(Ee,{monster:c,show:null!=c,onCancel:this.closeModal,editable:!1}))}}]),t}(a.Component));ze.defaultProps={};var Xe=ze,Be=function(e){var t=e.onAddPlayer,n=e.onRemovePlayer,a=e.playerList;return r.a.createElement("div",{className:"eb-list-container"},r.a.createElement("button",{onClick:t},"Add Player"),a.map(function(e){return r.a.createElement("div",{className:"eb-list-element",key:e.id},r.a.createElement("div",{className:"eb-margin-element"},"".concat(e.characterName," (").concat(e.playerName,") Level: ").concat(e.level,", Max Hp: ").concat(e.maxHp)),r.a.createElement("button",{className:"eb-margin-element",onClick:n(e.id)},"Delete"))}))};Be.defaultProps={};var Ge=Be,We=[{level:1,easy:25,medium:50,hard:75,deadly:100},{level:2,easy:50,medium:100,hard:150,deadly:200},{level:3,easy:75,medium:150,hard:225,deadly:400},{level:4,easy:125,medium:250,hard:375,deadly:500},{level:5,easy:250,medium:500,hard:750,deadly:1100},{level:6,easy:300,medium:600,hard:900,deadly:1400},{level:7,easy:350,medium:750,hard:1100,deadly:1700},{level:8,easy:450,medium:900,hard:1400,deadly:2100},{level:9,easy:550,medium:1100,hard:1600,deadly:2400},{level:10,easy:600,medium:1200,hard:1900,deadly:2800},{level:11,easy:800,medium:1600,hard:2400,deadly:3600},{level:12,easy:1e3,medium:2e3,hard:3e3,deadly:4500},{level:13,easy:1100,medium:2200,hard:3400,deadly:5100},{level:14,easy:1250,medium:2500,hard:3800,deadly:5700},{level:15,easy:1400,medium:2800,hard:4300,deadly:6400},{level:16,easy:1600,medium:3200,hard:4800,deadly:7200},{level:17,easy:2e3,medium:3900,hard:5900,deadly:8800},{level:18,easy:2100,medium:4200,hard:6300,deadly:9500},{level:19,easy:2400,medium:4900,hard:7300,deadly:10900},{level:20,easy:2800,medium:5700,hard:8500,deadly:12700}],Ke=function(e){var t=e.players.map(function(e){return t=e.level,We.filter(function(e){return e.level===t})[0];var t}).reduce(function(e,t){return e.easy+=t.easy,e.medium+=t.medium,e.hard+=t.hard,e.deadly+=t.deadly,e},{easy:0,medium:0,hard:0,deadly:0}),n=e.monsters.reduce(function(e,t){return e.xp+=t.monster.xp*t.count,e.count+=t.count,e},{xp:0,count:0}),a=n.xp,r=n.count;return r>=15?a*=4:r>=11?a*=3:r>=7?a*=2.5:r>=3?a*=2:2===r&&(a*=1.5),a>t.deadly?"Deadly":a>t.hard?"Hard":a>t.medium?"Medium":a>t.easy?"Easy":"Trivial"},qe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={encounter:null,selectingMonster:!1,selectingPlayer:!1,difficulty:"Easy"},n.addPlayer=n.addPlayer.bind(Object(d.a)(Object(d.a)(n))),n.addMonster=n.addMonster.bind(Object(d.a)(Object(d.a)(n))),n.onSelectPlayer=n.onSelectPlayer.bind(Object(d.a)(Object(d.a)(n))),n.onSelectMonster=n.onSelectMonster.bind(Object(d.a)(Object(d.a)(n))),n.onRemovePlayer=n.onRemovePlayer.bind(Object(d.a)(Object(d.a)(n))),n.onRemoveMonster=n.onRemoveMonster.bind(Object(d.a)(Object(d.a)(n))),n.changeName=n.changeName.bind(Object(d.a)(Object(d.a)(n))),n.onChangeMonsterQty=n.onChangeMonsterQty.bind(Object(d.a)(Object(d.a)(n))),n.onSave=n.onSave.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.encounter;null==t?(t={name:"",monsters:[],players:[]},this.setState({encounter:t,difficulty:Ke(t)})):Ve(t).then(function(t){e.setState({encounter:t,difficulty:Ke(t)})})}},{key:"changeName",value:function(e){var t=this.state.encounter;t.name=e.target.value,this.setState({encounter:t})}},{key:"addPlayer",value:function(){this.setState({selectingPlayer:!0})}},{key:"addMonster",value:function(){this.setState({selectingMonster:!0})}},{key:"onSelectPlayer",value:function(e){var t=this.state.encounter;t.players.push(e),this.setState({selectingPlayer:!1,difficulty:Ke(t)})}},{key:"onSelectMonster",value:function(e){var t=this.state.encounter;t.monsters.push({monster:e,count:1}),this.setState({selectingMonster:!1,difficulty:Ke(t)})}},{key:"onChangeMonsterQty",value:function(e){var t=this;return function(n){var a=t.state.encounter,r=parseInt(n.target.value);a.monsters.forEach(function(t){t.monster.id===e&&(t.count=r)}),t.setState({encounter:a,difficulty:Ke(a)})}}},{key:"onRemovePlayer",value:function(e){var t=this;return function(n){var a=t.state.encounter;a.players=a.players.filter(function(t){return t.id!==e}),t.setState({encounter:a,difficulty:Ke(a)})}}},{key:"onRemoveMonster",value:function(e){var t=this;return function(n){var a=t.state.encounter;a.monsters=a.monsters.filter(function(t){return t.monster.id!==e}),t.setState({encounter:a,difficulty:Ke(a)})}}},{key:"onSave",value:function(){var e=this;(function(e){return j().put("encounters",e)})(function(e){var t={};return t.name=e.name,t.monsters=[],t.players=[],Object(H.has)(e,"id")&&(t.id=e.id),e.players.forEach(function(e){return t.players.push(e.id)}),e.monsters.forEach(function(e){return t.monsters.push({id:e.monster.id,count:e.count})}),t}(this.state.encounter)).then(function(t){return e.props.onChangeView(Le)})}},{key:"render",value:function(){var e=this.state,t=e.encounter,n=e.selectingMonster,a=e.selectingPlayer,l=e.difficulty;return null==t?r.a.createElement("div",null,"Loading Encounter..."):n?r.a.createElement(je,{onSelectMonster:this.onSelectMonster}):a?r.a.createElement(Re,{onSelectPlayer:this.onSelectPlayer}):r.a.createElement("div",{className:"eb-view"},r.a.createElement("div",{className:"eb-header"},r.a.createElement("input",{className:"eb-name-input",type:"text",placeholder:"Name Encounter",onChange:this.changeName,value:t.name}),r.a.createElement("button",{className:"eb-margin-element",onClick:this.onSave},"Save")),r.a.createElement("div",{className:"eb-difficulty-text"},"Difficulty:\xa0",l),r.a.createElement("div",{className:"eb-columns-container"},r.a.createElement(Ge,{playerList:t.players,onAddPlayer:this.addPlayer,onRemovePlayer:this.onRemovePlayer}),r.a.createElement(Xe,{monsterList:t.monsters,onAddMonster:this.addMonster,onRemoveMonster:this.onRemoveMonster,onChangeMonsterQty:this.onChangeMonsterQty})))}}]),t}(a.Component);qe.defaultProps={encounter:null};var Qe=qe,Je=n(12),$e=function(e){return r.a.createElement(Je.c,{droppableId:e.droppableId},function(t){return r.a.createElement("div",Object.assign({className:e.className,ref:t.innerRef},t.droppableProps,t.droppablePlaceholder),e.children)})};$e.defaultProps={};var Ye=$e,Ze=function(e){return r.a.createElement(Je.b,{draggableId:e.draggableId,index:e.index},function(t){return r.a.createElement("div",Object.assign({className:e.className,ref:t.innerRef},t.draggableProps,t.dragHandleProps),e.children)})};Ze.defaultProps={};var _e=Ze,et=(n(138),"damage"),tt=(n(140),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={type:et,qty:0},n.changeDmg=n.changeDmg.bind(Object(d.a)(Object(d.a)(n))),n.changeType=n.changeType.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"changeDmg",value:function(e){var t=parseInt(e.target.value);this.setState({qty:t})}},{key:"changeType",value:function(e){var t=e.target.value;this.setState({type:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,a=t.dealToTarget,l=this.state,o=l.type,c=l.qty;return r.a.createElement(F,{show:n},r.a.createElement("div",{className:"tm-container"},r.a.createElement("input",{className:"tm-number-element",type:"number",value:c,onChange:this.changeDmg}),r.a.createElement("div",null,"Damage",r.a.createElement("input",{type:"radio",value:et,checked:o===et,onChange:this.changeType})),r.a.createElement("div",null,"Heal",r.a.createElement("input",{type:"radio",value:"heal",checked:"heal"===o,onChange:this.changeType})),r.a.createElement("div",null,"Temporary Hp",r.a.createElement("input",{type:"radio",value:"tmpHealth",checked:"tmpHealth"===o,onChange:this.changeType})),r.a.createElement("button",{className:"tm-element",onClick:function(t){return a(e.state)}},"Ok")))}}]),t}(a.Component));tt.defaultProps={};var nt=tt,at=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={creatureList:[],selectedMonster:null,targetIdx:null},n.onDragEnd=n.onDragEnd.bind(Object(d.a)(Object(d.a)(n))),n.selectMonster=n.selectMonster.bind(Object(d.a)(Object(d.a)(n))),n.onCloseModal=n.onCloseModal.bind(Object(d.a)(Object(d.a)(n))),n.onDealToTarget=n.onDealToTarget.bind(Object(d.a)(Object(d.a)(n))),n.removeCreature=n.removeCreature.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.encounter,a=t.onChangeView;null==n?(console.error("Should not make it to runner without encounter"),a(Le,null)):Ve(n).then(function(t){e.setState({creatureList:e.buildCreatureList(t)})})}},{key:"buildCreatureList",value:function(e){var t=0,n=e.players.map(function(e){return{id:t++,name:e.characterName,hp:e.maxHp,maxHp:e.maxHp,tmpHp:0,multiple:!1,isPlayer:!0}});return e.monsters.forEach(function(e){for(var a=e.count>1,r=0;r<e.count;r++)t++,n.push({id:t,name:e.monster.name,hp:e.monster.hp,maxHp:e.monster.hp,tmpHp:0,monsterId:r,multiple:a,monster:e.monster,isPlayer:!1})}),n}},{key:"selectMonster",value:function(e){var t=this;return function(n){t.setState({selectedMonster:e.monster})}}},{key:"onCloseModal",value:function(){this.setState({selectedMonster:null})}},{key:"selectTarget",value:function(e){var t=this;return function(n){t.setState({targetIdx:e})}}},{key:"onDealToTarget",value:function(e){console.log(e);var t=this.state,n=t.targetIdx,a=t.creatureList[n];switch(e.type){case et:var r=e.qty;a.tmpHp>0?(r>=a.tmpHp?(r-=a.tmpHp,a.tmpHp=0):(a.tmpHp-=r,r=0),a.hp-=r):a.hp-=e.qty;break;case"heal":a.hp+=e.qty,a.hp>a.maxHp&&(a.hp=a.maxHp);break;case"tmpHealth":a.tmpHp=e.qty;break;default:console.error("Unknow health change type")}this.setState({targetIdx:null})}},{key:"removeCreature",value:function(e){var t=this;return function(n){var a=t.state.creatureList;a.splice(e,1),t.setState({creatureList:a})}}},{key:"onDragEnd",value:function(e){var t=this.state.creatureList,n=e.destination.index,a=e.source.index,r=t[a];t.splice(a,1),t.splice(n,0,r),this.setState({creatureList:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.creatureList,a=t.selectedMonster,l=t.targetIdx;return r.a.createElement("div",{className:"er-container"},r.a.createElement(Ee,{monster:a,show:null!=a,onCancel:this.onCloseModal,editable:!1}),r.a.createElement(nt,{show:null!==l,dealToTarget:this.onDealToTarget}),r.a.createElement(Je.a,{onDragEnd:this.onDragEnd},r.a.createElement(Ye,{className:"er-droppable",droppableId:"creatureList"},n.map(function(t,n){return r.a.createElement(_e,{className:"er-draggable",key:t.id,draggableId:t.id.toString(),index:n},r.a.createElement("div",{className:"er-creature-container"},r.a.createElement("div",{onClick:t.isPlayer?null:e.selectMonster(t),className:"er-element"},function(e){var t=e.name;return e.multiple&&(t+="["+e.monsterId.toString()+"]"),t+=" "+e.hp+"/"+e.maxHp,e.tmpHp>0&&(t+=" ("+e.tmpHp+" Tmp Hp)"),e.isPlayer||(t+=" AC: "+e.monster.ac.toString()),t}(t)),r.a.createElement("div",null,r.a.createElement("button",{className:"er-element",onClick:e.selectTarget(n)},"Target"),t.hp<=0&&r.a.createElement("button",{className:"er-element",onClick:e.removeCreature(n)},"Remove"))))}))))}}]),t}(a.Component);at.defaultProps={encounter:null};var rt=at,lt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={view:Le,encounter:null},n.onChangeView=n.onChangeView.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onChangeView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState({view:e,encounter:t})}},{key:"render",value:function(){var e=this.state,t=e.view,n=e.encounter;switch(t){case Le:return r.a.createElement(Ue,{onChangeView:this.onChangeView});case"BUILDER":return r.a.createElement(Qe,{onChangeView:this.onChangeView,encounter:n});case"RUNNER":return r.a.createElement(rt,{onChangeView:this.onChangeView,encounter:n});default:console.error("Received unknown encounter view")}return null}}]),t}(a.Component);lt.defaultProps={};var ot=lt,ct={Encounters:r.a.createElement(ot,null),"Monster Viewer":r.a.createElement(je,null),"Player Viewer":r.a.createElement(Re,null)},it=(n(142),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={currentLocation:null,databaseLoaded:!1},n.getDisplayElement=n.getDisplayElement.bind(Object(d.a)(Object(d.a)(n))),n.backToRootMenu=n.backToRootMenu.bind(Object(d.a)(Object(d.a)(n))),n.menuSelection=n.menuSelection.bind(Object(d.a)(Object(d.a)(n))),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(e){var t=this;Object(E.a)("5eEncounters",3,{upgrade:O}).then(function(e){y=e}).then(function(e){console.log("App DataStore opened"),t.setState({databaseLoaded:!0})})}},{key:"menuSelection",value:function(e){var t=this;return function(n){t.setState({currentLocation:e})}}},{key:"getDisplayElement",value:function(){var e=this.state.currentLocation;return e?ct[e]:r.a.createElement(f,{menuItems:Object.keys(ct),onSelect:this.menuSelection})}},{key:"backToRootMenu",value:function(){this.setState({currentLocation:null})}},{key:"render",value:function(){var e=this.getDisplayElement(),t=this.state,n=t.currentLocation,a=t.databaseLoaded;return a?r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"app-location"},e),null!=n&&r.a.createElement("button",{onClick:this.backToRootMenu},"Menu")):r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{sizeUnit:"vmin",size:33,loading:!a}))}}]),t}(a.Component)),st=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(it,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/5eEncounters",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/5eEncounters","/service-worker.js");st?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):mt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):mt(t,e)})}}()},24:function(e,t,n){},52:function(e,t,n){e.exports=n(144)},57:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},77:function(e,t,n){},80:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},9:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){}},[[52,2,1]]]);
//# sourceMappingURL=main.54ec6b22.chunk.js.map